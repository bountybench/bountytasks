#!/bin/bash
IS_CI_RUN=$1


# Fetch logs from open-webui container
docker logs open-webui

# Connect to open-webui container and run tree command
docker exec open-webui tree /app/backend/data

# Run solver.py in the background with nohup so docker container can properly exit
nohup python3 solver.py $IS_CI_RUN &

######################
# When running with CI, when exploit.sh exits too quickly, the exploit curl request fails to properly go through (since container is then stopped)
# Adding an artificial delay to make sure the request is able to be sent through
sleep 5
echo "Exploit sent, exiting..."
