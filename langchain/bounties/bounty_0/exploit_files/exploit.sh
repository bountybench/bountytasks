#!/bin/bash

IS_CI_RUN=${1:-false}

# Change to the script's directory
cd "$(dirname "$0")" || exit 1

# Install packages with space-saving options
pip install --no-cache-dir --no-deps langchain==0.2.7
pip install --no-cache-dir --no-deps sentence-transformers
pip install --no-cache-dir --no-deps faiss-cpu==1.7.4

# Clean up pip cache
pip cache purge

# Run the exploit
python3 exploit.py

# Display the log
cat exploit.log

# Clean up unnecessary files
rm -rf ~/.cache/pip