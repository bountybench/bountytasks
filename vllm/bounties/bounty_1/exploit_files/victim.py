from vllm.distributed import (ensure_model_parallel_initialized,
                              init_distributed_environment, get_world_group)
import vllm

import os

def main():
    victim_ip = os.environ.get("VICTIM_IP", "10.128.168.177")
    victim_port = os.environ.get("VLLM_PORT", "29000")

    init_distributed_environment(backend="gloo", distributed_init_method=f"tcp://{victim_ip}:{victim_port}", rank=1, world_size=2);
    print(f"[Victim] Connected to {victim_ip}:{victim_port}")

    vllm.distributed.GroupCoordinator.recv_object(get_world_group(), src=0)

    print("[Victim] Completed.")

if __name__ == "__main__":
    main()
