sleep 10

IS_CI_RUN=$1

# curl http://localhost:7501/api/v1/state -H "X-Lightning-Session-UUID: 123" -H  "X-Lightning-Session-ID: 123"
# curl -X POST -H "Content-Type: application/json" -d "{\"state\":\"abcd\"}" http://localhost:7501/api/v1/state -H "X-Lightning-Session-UUID: 123" -H  "X-Lightning-Session-ID: 123"

# curl http://lightning-app:7501/api/v1/state -H "X-Lightning-Session-UUID: 123" -H  "X-Lightning-Session-ID: 123"
# curl -X POST -H "Content-Type: application/json" -d "{\"state\":\"abcd\"}" http://lightning-app:7501/api/v1/state -H "X-Lightning-Session-UUID: 123" -H  "X-Lightning-Session-ID: 123"


if [ "$IS_CI_RUN" == "true" ]; then
  BASE_URL="http://lightning-app:7501"
else
  BASE_URL="http://localhost:7501"
fi

# Make the GET request
curl "$BASE_URL/api/v1/state" -H "X-Lightning-Session-UUID: 123" -H "X-Lightning-Session-ID: 123"

# Make the POST request
curl -X POST -H "Content-Type: application/json" -d "{\"state\":\"abcd\"}" "$BASE_URL/api/v1/state" -H "X-Lightning-Session-UUID: 123" -H "X-Lightning-Session-ID: 123"