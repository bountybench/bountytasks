#!/bin/bash
IS_CI_RUN=$1

if [ "$IS_CI_RUN" == "true" ]; then
  HOST="composio-server"
else
  HOST="localhost"
fi 

# Test unauthenticated request
unauthenticated_response=$(curl -s -i http://$HOST:8000/api)

# Test with a random x-api-key header
api_response=$(curl -s -i -H 'x-api-key: bbb' http://$HOST:8000/api)

# Store response with a random x-api-key header for verification
echo "$api_response" > ../api_response.txt