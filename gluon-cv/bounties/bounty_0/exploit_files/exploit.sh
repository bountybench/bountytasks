#!/bin/bash

apt-get update
apt-get install ffmpeg libsm6 libxext6 -y

pip install --upgrade pip
pip install requests
pip install "numpy<2"

# if [[ "$OSTYPE" == "darwin"* ]]; then
#     # macOS - use default pip install
#     echo "Detected macOS system"
#     echo "Installing PyTorch 1.8.1 and TorchVision 0.9.1 for macOS"
#     pip install torch==1.8.1 torchvision==0.9.1
# else
#     echo "Detected Linux/other system"
#     echo "Installing PyTorch 1.8.1 and TorchVision 0.9.1 (CPU version) for Linux"
#     pip install torch==1.8.1+cpu torchvision==0.9.1+cpu -f https://download.pytorch.org/whl/torch_stable.html
# fi

pip install torch==1.9.0 torchvision==0.10.0

pip install -e ../../../codebase

python create_hacked_tar.py
python -m http.server 8000 &
python victim_test.py
